import{_ as k,h as B,k as C,i as D,o as E,y as A,u as O,r as l,j as K,a as L,b as P,d as s,w as q,v as z,s as N,n as S,E as i,p as T,g as U}from"./index-d8dbe141.js";const V="/å¤´åƒ1.jpg",J="/å¤´åƒ2.jpg",Z="/å¤´åƒ3.jpg",$="/å¤´åƒ4.jpg",F="/å¤´åƒ5.jpg",G="/å¤´åƒ6.jpg",H="/å¤´åƒ7.jpg",Q="/å¤´åƒ8.jpg",W="/å¤´åƒ9.jpg",f="/å¤´åƒ10.jpg";const X=n=>(T("data-v-7c6dbe0e"),n=n(),U(),n),Y={style:{position:"relative"}},ee={class:"view"},ae=["src"],te=X(()=>s("p",null,"ç‚¹å‡»å¯ä»¥ROLLä¸åŒå¤´åƒå“¦~",-1)),se=["onKeydown"],oe={__name:"SignIn",setup(n){B(),console.log("avatar9::: ",f);const b=C(),{data:ne,setShow:I}=D("isShow");I(b.meta.isShow),E(()=>{if(o.value=localStorage.getItem("username"),o.value){v.push("/chatRoom");return}});const y=A.create({baseURL:"/api",timeout:3e3,withCredentials:!0}),d=O(),w=l(""),o=l(""),m=l(""),v=K(),j=/^[\u4e00-\u9fa5a-zA-Z0-9]{2,8}$/;function x(t,e){return t.test(e)}function p(t){t.preventDefault();const e=o.value.trim(),c=u[r].number;if(!x(j,e)){m.value="è¯·è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·å,åº”è¯¥æ˜¯2-8ä¸ªè‹±æ–‡,ä¸­æ–‡,æˆ–è€…æ•°å­—çš„ç»„åˆ,ä¸è¦æœ‰ç¬¦å·!!!",i({type:"error",message:m,duration:5e3});return}localStorage.setItem("username",e),localStorage.setItem("avatarSelected",c),d.avatarSelected=c,w.value="",d.username=e,o.value="";let R={name:localStorage.getItem("username"),avatarSelected:localStorage.getItem("avatarSelected")};y.post("/login",R).then(a=>{console.log(a),a.data.statuts=="sucessed"?(localStorage.setItem("username",a.data.name),localStorage.setItem("avatarSelected",a.data.avatarSelected),localStorage.setItem("ID",a.data.id),setTimeout(()=>{v.push("/chatRoom")},500)):a.data.statuts=="failedAtDuplicationOfName"&&i({type:"error",message:"ä½ å–å¾—ç”¨æˆ·åå’Œåˆ«äººé‡åäº†",duration:2e3})}).catch(a=>{console.log(a),a.message=="Request failed with status code 500"?i({type:"error",message:"æœåŠ¡å™¨å“åº”å¤±è´¥!!!",duration:3e3}):a.message=="timeout of 3000ms exceeded"&&i({type:"error",message:"æœåŠ¡å™¨å“åº”æ—¶é—´è¿‡é•¿,å¤±è´¥!!!",duration:3e3})})}const u=[{avatar:V,number:"0"},{avatar:J,number:"1"},{avatar:Z,number:"2"},{avatar:$,number:"3"},{avatar:F,number:"4"},{avatar:G,number:"5"},{avatar:H,number:"6"},{avatar:Q,number:"7"},{avatar:W,number:"8"},{avatar:f,number:"9"}],g=t=>Math.floor(Math.random()*t);let r=g(10);const _=l(u[r].avatar),M=()=>{r=g(10),_.value=u[r].avatar};function h(t){let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(e&&t==1)return{height:"80vh"};if(e&&t==2)return{"margin-bottom":"150px"}}return(t,e)=>(L(),P("div",{class:"allin",style:S(h(1))},[s("form",{style:S(h(2))},[s("div",Y,[s("div",ee,[s("img",{class:"preview",ref:"preview",onClick:M,src:_.value},null,8,ae)]),te]),q(s("input",{class:"name",type:"text",name:"userID","onUpdate:modelValue":e[0]||(e[0]=c=>o.value=c),placeholder:"åœ¨è¿™é‡Œè®¾ç½®ä½ çš„èŠå¤©å®¤IDğŸ˜",onKeydown:N(p,["enter"])},null,40,se),[[z,o.value]]),s("button",{class:"btn",type:"submit",onClick:p}," âœ¨åŠ å…¥èŠå¤©å®¤âœ¨ ")],4)],4))}},ce=k(oe,[["__scopeId","data-v-7c6dbe0e"]]);export{ce as default};
