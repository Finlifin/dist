import{_ as R,A as C,j as D,i as k,o as B,B as E,u as M,r as l,h as q,a as A,b as K,d as t,w as L,v as N,q as O,E as u,p as T,g as U}from"./index-474a8a88.js";const V="/å¤´åƒ1.jpg",z="/å¤´åƒ2.jpg",J="/å¤´åƒ3.jpg",Z="/å¤´åƒ4.jpg",$="/å¤´åƒ5.jpg",F="/å¤´åƒ6.jpg",G="/å¤´åƒ7.jpg",H="/å¤´åƒ8.jpg",P="/å¤´åƒ9.jpg",h="/å¤´åƒ10.jpg";const Q=n=>(T("data-v-b363b41b"),n=n(),U(),n),W={class:"allin"},X={style:{position:"relative"}},Y={class:"view"},ee=["src"],ae=Q(()=>t("p",null,"ç‚¹å‡»å¯ä»¥ROLLä¸åŒå¤´åƒå“¦~",-1)),te=["onKeydown"],se={__name:"SignIn",setup(n){C(),console.log("avatar9::: ",h);const b=D(),{data:oe,setShow:S}=k("isShow");S(b.meta.isShow),B(()=>{if(s.value=localStorage.getItem("username"),s.value){v.push("/chatRoom");return}});const f=E.create({baseURL:"/api",timeout:3e3,withCredentials:!0}),d=M(),I=l(""),s=l(""),m=l(""),v=q(),w=/^[\u4e00-\u9fa5a-zA-Z0-9]{2,8}$/;function j(o,a){return o.test(a)}function p(o){o.preventDefault();const a=s.value.trim(),c=i[r].number;if(!j(w,a)){m.value="è¯·è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·å,åº”è¯¥æ˜¯2-8ä¸ªè‹±æ–‡,ä¸­æ–‡,æˆ–è€…æ•°å­—çš„ç»„åˆ,ä¸è¦æœ‰ç¬¦å·!!!",u({type:"error",message:m,duration:5e3});return}localStorage.setItem("username",a),localStorage.setItem("avatarSelected",c),d.avatarSelected=c,I.value="",d.username=a,s.value="";let x={name:localStorage.getItem("username"),avatarSelected:localStorage.getItem("avatarSelected")};f.post("/login",x).then(e=>{console.log(e),e.data.statuts=="sucessed"?(localStorage.setItem("username",e.data.name),localStorage.setItem("avatarSelected",e.data.avatarSelected),localStorage.setItem("ID",e.data.id),setTimeout(()=>{v.push("/chatRoom")},500)):e.data.statuts=="failedAtDuplicationOfName"&&u({type:"error",message:"ä½ å–å¾—ç”¨æˆ·åå’Œåˆ«äººé‡åäº†",duration:2e3})}).catch(e=>{console.log(e),e.message=="Request failed with status code 500"?u({type:"error",message:"æœåŠ¡å™¨å“åº”å¤±è´¥!!!",duration:3e3}):e.message=="timeout of 3000ms exceeded"&&u({type:"error",message:"æœåŠ¡å™¨å“åº”æ—¶é—´è¿‡é•¿,å¤±è´¥!!!",duration:3e3})})}const i=[{avatar:V,number:"0"},{avatar:z,number:"1"},{avatar:J,number:"2"},{avatar:Z,number:"3"},{avatar:$,number:"4"},{avatar:F,number:"5"},{avatar:G,number:"6"},{avatar:H,number:"7"},{avatar:P,number:"8"},{avatar:h,number:"9"}],g=o=>Math.floor(Math.random()*o);let r=g(10);const _=l(i[r].avatar),y=()=>{r=g(10),_.value=i[r].avatar};return(o,a)=>(A(),K("div",W,[t("form",null,[t("div",X,[t("div",Y,[t("img",{class:"preview",ref:"preview",onClick:y,src:_.value},null,8,ee)]),ae]),L(t("input",{class:"name",type:"text",name:"userID","onUpdate:modelValue":a[0]||(a[0]=c=>s.value=c),placeholder:"åœ¨è¿™é‡Œè®¾ç½®ä½ çš„èŠå¤©å®¤IDğŸ˜",onKeydown:O(p,["enter"])},null,40,te),[[N,s.value]]),t("button",{class:"btn",type:"submit",onClick:p}," âœ¨åŠ å…¥èŠå¤©å®¤âœ¨ ")])]))}},re=R(se,[["__scopeId","data-v-b363b41b"]]);export{re as default};
